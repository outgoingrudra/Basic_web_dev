<!DOCTYPE html>
<html lang="en" class="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To-Do List App</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body class="bg-gradient-to-tr from-gray-100 via-blue-100 to-purple-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 text-gray-900 dark:text-gray-100 transition-all duration-300 min-h-screen flex items-center justify-center">

  <!-- Container -->
  <div class="w-full max-w-xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl transition-all duration-300">
    
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-extrabold tracking-tight">üìù To-Do List</h1>
      <button id="toggleMode" class="text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 px-4 py-1 rounded transition-all shadow">
        Toggle Mode
      </button>
    </div>

    <!-- Time -->
    <div class="text-right text-sm mb-4 font-medium text-gray-600 dark:text-gray-300">
      <span id="timeDisplay"></span>
    </div>

    <!-- Input -->
    <div class="flex gap-2 mb-4">
      <input
        type="text"
        id="taskInput"
        placeholder="Add a new task..."
        class="flex-grow p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 dark:bg-gray-700 dark:border-gray-600 shadow-sm"
      />
      <button
        id="addBtn"
        class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow-md transition-all"
      >Add</button>
    </div>

    <!-- Tasks List -->
    <ul id="taskList" class="space-y-3 max-h-[400px] overflow-y-auto pr-2">
      <!-- Tasks will appear here -->
    </ul>
  </div>

  <!-- Script -->
  <script>
    const input = document.getElementById("taskInput");
    const addBtn = document.getElementById("addBtn");
    const taskList = document.getElementById("taskList");
    const toggleMode = document.getElementById("toggleMode");
    const timeDisplay = document.getElementById("timeDisplay");

    // Dark mode persistence
    if (localStorage.getItem("theme") === "dark") {
      document.documentElement.classList.add("dark");
    }

    toggleMode.addEventListener("click", () => {
      document.documentElement.classList.toggle("dark");
      const currentTheme = document.documentElement.classList.contains("dark") ? "dark" : "light";
      localStorage.setItem("theme", currentTheme);
    });

    // Time updater (top clock)
    function updateTime() {
      const now = new Date();
      timeDisplay.textContent = now.toLocaleTimeString();
    }
    setInterval(updateTime, 1000);
    updateTime();

    // Load tasks from storage
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    function renderTasks() {
      taskList.innerHTML = "";
      tasks.forEach((task, index) => {
        const li = document.createElement("li");
        li.className = `
          group 
          flex flex-col sm:flex-row sm:items-center justify-between 
          bg-gradient-to-br from-white via-blue-100 to-purple-100 dark:from-gray-700 dark:via-gray-800 dark:to-gray-700 
          px-4 py-3 rounded-lg shadow-md 
          hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 ease-in-out
        `;

        li.innerHTML = `
          <div class="flex items-start sm:items-center gap-3 flex-grow">
            <input type="checkbox" ${task.done ? "checked" : ""} class="accent-blue-500 w-5 h-5 mt-1 sm:mt-0" onchange="toggleDone(${index})" />
            <div>
              <p class="text-base font-semibold ${task.done ? 'line-through text-gray-400 dark:text-gray-400' : 'text-gray-800 dark:text-gray-100'}">
                ${task.text}
              </p>
              <p class="text-xs text-gray-500 dark:text-gray-400">Added at: ${task.time}</p>
            </div>
          </div>
          <button onclick="deleteTask(${index})" class="text-red-500 hover:text-red-700 text-sm font-semibold transition mt-2 sm:mt-0 sm:ml-4">Delete</button>
        `;
        taskList.appendChild(li);
      });

      localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    function addTask() {
      const taskText = input.value.trim();
      if (!taskText) return;
      const now = new Date();
      const time = now.toLocaleTimeString();
      tasks.push({ text: taskText, done: false, time });
      input.value = "";
      renderTasks();
    }

    function deleteTask(index) {
      tasks.splice(index, 1);
      renderTasks();
    }

    function toggleDone(index) {
      tasks[index].done = !tasks[index].done;
      renderTasks();
    }

    addBtn.addEventListener("click", addTask);
    input.addEventListener("keypress", (e) => {
      if (e.key === "Enter") addTask();
    });

    renderTasks();
  </script>
</body>
</html>
